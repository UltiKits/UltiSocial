# UltiSocial - Minecraft å¥½å‹ç³»ç»Ÿæ’ä»¶

[![UltiTools-API](https://img.shields.io/badge/UltiTools--API-6.2.0-blue)](https://github.com/UltiKits/UltiTools-Reborn)
[![Minecraft](https://img.shields.io/badge/Minecraft-1.13--1.21-green)](https://www.spigotmc.org/)
[![Java](https://img.shields.io/badge/Java-8+-orange)](https://www.oracle.com/java/)

UltiSocial æ˜¯ä¸€ä¸ªåŸºäº UltiTools-API æ¡†æ¶å¼€å‘çš„ Minecraft å¥½å‹ç³»ç»Ÿæ’ä»¶ï¼Œæä¾›å®Œæ•´çš„å¥½å‹ç®¡ç†ã€ç§èŠã€ä¼ é€å’Œé»‘åå•åŠŸèƒ½ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ¤ å¥½å‹ç³»ç»Ÿ

- **å¥½å‹è¯·æ±‚**: å‘é€ã€æ¥å—ã€æ‹’ç»å¥½å‹è¯·æ±‚
- **å¥½å‹ç®¡ç†**: æ·»åŠ ã€åˆ é™¤å¥½å‹ï¼Œæ”¯æŒæ”¶è—åŠŸèƒ½
- **å¥½å‹åˆ—è¡¨**: ç¾è§‚çš„ GUI ç•Œé¢ï¼Œåˆ†é¡µæ˜¾ç¤ºï¼ŒåŒºåˆ†åœ¨çº¿/ç¦»çº¿çŠ¶æ€
- **ä¸Šä¸‹çº¿é€šçŸ¥**: å¥½å‹ä¸Šä¸‹çº¿æ—¶è‡ªåŠ¨æé†’

### ğŸ’¬ ç¤¾äº¤åŠŸèƒ½

- **ç§èŠç³»ç»Ÿ**: åªå…è®¸å¥½å‹ä¹‹é—´ç§èŠï¼Œä¿æŠ¤ç©å®¶éšç§
- **å¥½å‹ä¼ é€**: ä¸€é”®ä¼ é€åˆ°å¥½å‹ä½ç½®ï¼Œæ”¯æŒå†·å´æ—¶é—´è®¾ç½®
- **æ¸¸æˆæ¨¡å¼æ˜¾ç¤º**: åœ¨å¥½å‹åˆ—è¡¨ä¸­æ˜¾ç¤ºåœ¨çº¿å¥½å‹çš„æ¸¸æˆæ¨¡å¼

### ğŸš« é»‘åå•ç³»ç»Ÿ
- **åŒå‘å±è”½**: æ‹‰é»‘ååŒæ–¹éƒ½æ— æ³•å‘é€å¥½å‹è¯·æ±‚
- **è‡ªåŠ¨è§£é™¤**: æ‹‰é»‘æ—¶è‡ªåŠ¨è§£é™¤å·²æœ‰çš„å¥½å‹å…³ç³»
- **æ— ä¸Šé™**: é»‘åå•æ•°é‡ä¸é™åˆ¶
- **ç‹¬ç«‹ç®¡ç†**: ä¸“å±é»‘åå• GUI ç•Œé¢

## ğŸ“¦ å®‰è£…

1. ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„ UltiTools-API æ ¸å¿ƒæ’ä»¶
2. å°† `UltiSocial.jar` æ”¾å…¥ `plugins/UltiTools/plugins/` ç›®å½•
3. é‡å¯æœåŠ¡å™¨æˆ–ä½¿ç”¨ `/ultitools reload` é‡è½½æ’ä»¶

## ğŸ“ å‘½ä»¤

| å‘½ä»¤ | æè¿° | æƒé™ |
|------|------|------|
| `/friend` | æ‰“å¼€å¥½å‹åˆ—è¡¨ GUI | `ultisocial.friend` |
| `/friend list` | æ–‡å­—åˆ—å‡ºæ‰€æœ‰å¥½å‹ | `ultisocial.friend` |
| `/friend add <ç©å®¶>` | å‘é€å¥½å‹è¯·æ±‚ | `ultisocial.friend` |
| `/friend accept <ç©å®¶>` | æ¥å—å¥½å‹è¯·æ±‚ | `ultisocial.friend` |
| `/friend deny <ç©å®¶>` | æ‹’ç»å¥½å‹è¯·æ±‚ | `ultisocial.friend` |
| `/friend remove <ç©å®¶>` | åˆ é™¤å¥½å‹ | `ultisocial.friend` |
| `/friend tp <å¥½å‹>` | ä¼ é€åˆ°å¥½å‹ä½ç½® | `ultisocial.friend.tp` |
| `/friend msg <å¥½å‹> <æ¶ˆæ¯>` | å‘å¥½å‹å‘é€ç§èŠ | `ultisocial.friend.msg` |
| `/friend requests` | æŸ¥çœ‹å¾…å¤„ç†è¯·æ±‚ | `ultisocial.friend` |
| `/friend block <ç©å®¶>` | å°†ç©å®¶åŠ å…¥é»‘åå• | `ultisocial.friend.block` |
| `/friend unblock <ç©å®¶>` | å°†ç©å®¶ç§»å‡ºé»‘åå• | `ultisocial.friend.block` |
| `/friend blocklist` | æ‰“å¼€é»‘åå• GUI | `ultisocial.friend.block` |
| `/friend help` | æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ | `ultisocial.friend` |

## ğŸ¨ GUI ç•Œé¢

### å¥½å‹åˆ—è¡¨ (`/friend`)

- **54æ ¼ç•Œé¢**: 45ä¸ªå¥½å‹ä½ + 9ä¸ªå¯¼èˆªæŒ‰é’®
- **åˆ†é¡µæ”¯æŒ**: è‡ªåŠ¨åˆ†é¡µï¼Œæ”¯æŒå¤šé¡µæµè§ˆ
- **é¢œè‰²åŒºåˆ†**:
  - ğŸŸ¢ ç»¿è‰²ç»ç’ƒæ¿ = åœ¨çº¿å¥½å‹
  - ğŸ”´ çº¢è‰²ç»ç’ƒæ¿ = ç¦»çº¿å¥½å‹
  - â­ é‡‘å— = æ”¶è—çš„å¥½å‹
- **æ“ä½œæ–¹å¼**:
  - å·¦é”®ç‚¹å‡»ï¼šä¼ é€åˆ°å¥½å‹ï¼ˆåœ¨çº¿æ—¶ï¼‰
  - å³é”®ç‚¹å‡»ï¼šå‘é€ç§èŠï¼ˆåœ¨çº¿æ—¶ï¼‰/ åˆ é™¤å¥½å‹ï¼ˆç¦»çº¿æ—¶ï¼‰
  - Shift+å·¦é”®ï¼šæ”¶è—/å–æ¶ˆæ”¶è—
  - Shift+å³é”®ï¼šåˆ é™¤å¥½å‹

### é»‘åå•ç®¡ç† (`/friend blocklist`)

- **ç‹¬ç«‹ç•Œé¢**: ä¸“å±é»‘åå•ç®¡ç† GUI
- **ç©å®¶ä¿¡æ¯**: æ˜¾ç¤ºç©å®¶å¤´é¢…ã€æ‹‰é»‘æ—¶é—´ã€æ‹‰é»‘åŸå› 
- **å¿«é€Ÿæ“ä½œ**: å·¦é”®ç‚¹å‡»è§£é™¤æ‹‰é»‘
- **é¡µé¢åˆ‡æ¢**: æ”¯æŒä¸å¥½å‹åˆ—è¡¨ç›¸äº’åˆ‡æ¢

## âš™ï¸ é…ç½®æ–‡ä»¶

```yaml
# config/social_config.yml

# æœ€å¤§å¥½å‹æ•°é‡
maxFriends: 50

# æ˜¯å¦å¯ç”¨å¥½å‹ä¼ é€åŠŸèƒ½
enableTeleport: true

# ä¼ é€å†·å´æ—¶é—´ï¼ˆç§’ï¼‰
teleportCooldown: 60

# ä¸Šçº¿é€šçŸ¥æ¶ˆæ¯
onlineMessage: "&aä½ çš„å¥½å‹ {PLAYER} ä¸Šçº¿äº†ï¼"

# ä¸‹çº¿é€šçŸ¥æ¶ˆæ¯
offlineMessage: "&7ä½ çš„å¥½å‹ {PLAYER} ä¸‹çº¿äº†"

# é»‘åå•æç¤ºæ¶ˆæ¯
blockedMessage: "&cæ— æ³•ä¸ {PLAYER} è¿›è¡Œå¥½å‹æ“ä½œï¼Œå› ä¸ºå­˜åœ¨é»‘åå•å…³ç³»"

# æ‹‰é»‘æˆåŠŸæ¶ˆæ¯
playerBlockedMessage: "&cå·²å°† {PLAYER} åŠ å…¥é»‘åå•"

# è§£é™¤æ‹‰é»‘æ¶ˆæ¯
playerUnblockedMessage: "&aå·²å°† {PLAYER} ä»é»‘åå•ç§»é™¤"
```

## ğŸ—„ï¸ æ•°æ®å­˜å‚¨

UltiSocial æ”¯æŒå¤šç§æ•°æ®å­˜å‚¨æ–¹å¼ï¼ˆç”± UltiTools-API ç»Ÿä¸€ç®¡ç†ï¼‰ï¼š

- **JSON**: æ–‡ä»¶å­˜å‚¨ï¼Œé€‚åˆå°å‹æœåŠ¡å™¨
- **SQLite**: æœ¬åœ°æ•°æ®åº“ï¼Œæ¨èä¸­å°å‹æœåŠ¡å™¨
- **MySQL**: è¿œç¨‹æ•°æ®åº“ï¼Œé€‚åˆå¤§å‹æœåŠ¡å™¨/BungeeCord ç½‘ç»œ

### æ•°æ®è¡¨ç»“æ„

#### friends è¡¨
| å­—æ®µ | ç±»å‹ | æè¿° |
|------|------|------|
| id | INT | ä¸»é”® |
| player_uuid | VARCHAR | ç©å®¶ UUID |
| friend_uuid | VARCHAR | å¥½å‹ UUID |
| friend_name | VARCHAR | å¥½å‹åç§° |
| favorite | BOOLEAN | æ˜¯å¦æ”¶è— |
| nickname | VARCHAR | å¥½å‹å¤‡æ³¨ |
| created_time | BIGINT | æ·»åŠ æ—¶é—´ |

#### friend_requests è¡¨
| å­—æ®µ | ç±»å‹ | æè¿° |
|------|------|------|
| id | INT | ä¸»é”® |
| sender_uuid | VARCHAR | å‘é€è€… UUID |
| receiver_uuid | VARCHAR | æ¥æ”¶è€… UUID |
| sender_name | VARCHAR | å‘é€è€…åç§° |
| created_time | BIGINT | å‘é€æ—¶é—´ |
| status | VARCHAR | è¯·æ±‚çŠ¶æ€ |

#### blacklist è¡¨

| å­—æ®µ | ç±»å‹ | æè¿° |
|------|------|------|
| id | INT | ä¸»é”® |
| player_uuid | VARCHAR | ç©å®¶ UUID |
| blocked_uuid | VARCHAR | è¢«æ‹‰é»‘è€… UUID |
| blocked_name | VARCHAR | è¢«æ‹‰é»‘è€…åç§° |
| created_time | BIGINT | æ‹‰é»‘æ—¶é—´ |
| reason | VARCHAR | æ‹‰é»‘åŸå›  |

## ğŸ”§ å¼€å‘è€… API

### è·å– FriendService

```java
import com.ultikits.ultitools.UltiTools;
import com.ultikits.plugins.social.service.FriendService;

// ä»å®¹å™¨è·å–æœåŠ¡
FriendService friendService = UltiTools.getInstance()
    .getContext()
    .getBean(FriendService.class);
```

### ä¸»è¦ API æ–¹æ³•

```java
// å¥½å‹å…³ç³»ç®¡ç†
boolean areFriends(UUID player1, UUID player2);
List<FriendData> getFriends(UUID playerUuid);
void addFriend(UUID playerUuid, UUID friendUuid, String friendName);
void removeFriend(UUID playerUuid, UUID friendUuid);

// å¥½å‹è¯·æ±‚
boolean sendRequest(UUID senderUuid, String senderName, UUID receiverUuid);
void acceptRequest(UUID senderUuid, UUID receiverUuid);
void denyRequest(UUID senderUuid, UUID receiverUuid);
List<FriendRequestData> getPendingRequests(UUID playerUuid);

// é»‘åå•åŠŸèƒ½
boolean addToBlacklist(UUID playerUuid, UUID blockedUuid, String blockedName, String reason);
boolean removeFromBlacklist(UUID playerUuid, UUID blockedUuid);
boolean isBlocked(UUID player1, UUID player2); // åŒå‘æ£€æŸ¥
boolean isBlockedBy(UUID playerUuid, UUID blockerUuid); // å•å‘æ£€æŸ¥
List<BlacklistData> getBlacklist(UUID playerUuid);
```

### äº‹ä»¶ç›‘å¬ç¤ºä¾‹

```java
@EventListener
public void onPlayerJoin(PlayerJoinEvent event) {
    FriendService friendService = UltiTools.getInstance()
        .getContext()
        .getBean(FriendService.class);
    
    List<FriendData> friends = friendService.getFriends(event.getPlayer().getUniqueId());
    // å¤„ç†å¥½å‹é€»è¾‘...
}
```

## ğŸ”— ä¸å…¶ä»–æ¨¡å—é›†æˆ

### UltiMail é‚®ä»¶é›†æˆ
å½“å®‰è£… UltiMail æ¨¡å—æ—¶ï¼Œå¥½å‹è¯·æ±‚å¯ä»¥é€šè¿‡æ¸¸æˆå†…é‚®ä»¶é€šçŸ¥ï¼š

```java
// GameMailService æ¥å£ç”± UltiMail å®ç°
// ä½¿ç”¨ @Service(priority = 100) ä¼˜å…ˆçº§è¦†ç›–é»˜è®¤çš„ NoOp å®ç°
GameMailService mailService = UltiTools.getInstance()
    .getContext()
    .getHighestPriorityBean(GameMailService.class);

if (mailService.isAvailable()) {
    mailService.sendMail(receiverUuid, "ç³»ç»Ÿ", "å¥½å‹è¯·æ±‚", 
        senderName + " æƒ³å’Œä½ æˆä¸ºå¥½å‹ï¼", null);
}
```

### TeleportService ä¼ é€æœåŠ¡

å¥½å‹ä¼ é€åŠŸèƒ½ä½¿ç”¨æ¡†æ¶æä¾›çš„ `TeleportService`ï¼š

```java
TeleportService teleportService = UltiTools.getInstance()
    .getContext()
    .getBean(TeleportService.class);

// å¼‚æ­¥ä¼ é€ï¼Œå¸¦å†·å´æ£€æŸ¥
teleportService.teleport(player, targetPlayer.getLocation());
```

## ğŸ“‹ æƒé™èŠ‚ç‚¹

| æƒé™èŠ‚ç‚¹ | æè¿° | é»˜è®¤ |
|----------|------|------|
| `ultisocial.friend` | åŸºç¡€å¥½å‹åŠŸèƒ½ | true |
| `ultisocial.friend.tp` | å¥½å‹ä¼ é€åŠŸèƒ½ | true |
| `ultisocial.friend.msg` | å¥½å‹ç§èŠåŠŸèƒ½ | true |
| `ultisocial.friend.block` | é»‘åå•åŠŸèƒ½ | true |
| `ultisocial.friend.bypass` | ç»•è¿‡å¥½å‹æ•°é‡é™åˆ¶ | op |

## ğŸŒ å¤šè¯­è¨€æ”¯æŒ

è¯­è¨€æ–‡ä»¶ä½äº `lang/` ç›®å½•ï¼š
- `zh.yml` - ç®€ä½“ä¸­æ–‡
- `en.yml` - English

### æ·»åŠ æ–°è¯­è¨€

1. å¤åˆ¶ `en.yml` ä¸ºæ–°è¯­è¨€æ–‡ä»¶ï¼ˆå¦‚ `ja.yml`ï¼‰
2. ç¿»è¯‘æ‰€æœ‰æ–‡æœ¬
3. åœ¨é…ç½®ä¸­è®¾ç½®è¯­è¨€æˆ–è®©ç©å®¶å®¢æˆ·ç«¯è‡ªåŠ¨æ£€æµ‹

## ğŸ“Š å˜æ›´æ—¥å¿—

### v1.1.0 (å½“å‰ç‰ˆæœ¬) - 2026-02-12

#### UltiTools-API v6.2.0 è¿ç§»

- ğŸš€ **Query DSL**: æ•°æ®åº“æŸ¥è¯¢å…¨é¢å‡çº§åˆ°æ–°çš„ Query DSL API
  - æ›¿æ¢æ‰€æœ‰ `WhereCondition.builder()` ä¸º `dataOperator.query().where().eq()`
  - æ›´æµç•…çš„é“¾å¼è°ƒç”¨ï¼Œæ›´æ˜“è¯»çš„ä»£ç 
  - è‡ªåŠ¨ä¼˜åŒ–çš„ SQL ç”Ÿæˆ
- ğŸš€ **@Scheduled å®šæ—¶ä»»åŠ¡**: ä½¿ç”¨å£°æ˜å¼å®šæ—¶ä»»åŠ¡æ›¿ä»£æ‰‹åŠ¨ `runTaskTimer`
  - å¥½å‹è¯·æ±‚è¿‡æœŸæ¸…ç†æ”¹ä¸º `@Scheduled(period = 1200, async = true)`
  - è‡ªåŠ¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œæ— éœ€æ‰‹åŠ¨å–æ¶ˆ
- ğŸš€ **é…ç½®éªŒè¯**: æ·»åŠ  `@Range` å’Œ `@NotEmpty` æ³¨è§£
  - `maxFriends`: 1-500 èŒƒå›´éªŒè¯
  - `requestTimeout`: 10-3600 ç§’èŒƒå›´éªŒè¯
  - `tpCooldown`: 0-3600 ç§’èŒƒå›´éªŒè¯
  - æ‰€æœ‰æ¶ˆæ¯å­—æ®µæ·»åŠ  `@NotEmpty` éªŒè¯
- ğŸš€ **ç°ä»£åŸºç±»**: è¿ç§»åˆ°æ–°çš„åŸºç±»
  - `FriendshipData` / `BlacklistData`: `AbstractDataEntity` â†’ `BaseDataEntity<String>`
  - `FriendCommand`: `AbstractCommandExecutor` â†’ `BaseCommandExecutor`
- ğŸ“ **ä»£ç è´¨é‡**: ç§»é™¤è¿‡æ—¶å¯¼å…¥ï¼Œä¼˜åŒ–ä»£ç ç»“æ„

#### åŠŸèƒ½ç‰¹æ€§

- âœ¨ æ–°å¢é»‘åå•ç³»ç»Ÿ
  - åŒå‘å±è”½åŠŸèƒ½
  - ç‹¬ç«‹é»‘åå• GUI
  - æ‹‰é»‘æ—¶è‡ªåŠ¨è§£é™¤å¥½å‹
- âœ¨ æ–°å¢å¥½å‹ä¼ é€åŠŸèƒ½ï¼ˆä½¿ç”¨æ¡†æ¶ TeleportServiceï¼‰
- âœ¨ æ–°å¢å¥½å‹ç§èŠåŠŸèƒ½
- âœ¨ å¥½å‹åˆ—è¡¨æ˜¾ç¤ºæ¸¸æˆæ¨¡å¼
- ğŸ”§ ä¼˜åŒ–æœåŠ¡ä¼˜å…ˆçº§æœºåˆ¶ï¼ˆ@Service priorityï¼‰
- ğŸ”§ é‡æ„å‘½ä»¤ç³»ç»Ÿï¼Œæ”¯æŒ Tab è¡¥å…¨
- ğŸ”§ å®Œå–„ i18n å¤šè¯­è¨€æ”¯æŒ

### v1.0.0
- ğŸ‰ åˆå§‹ç‰ˆæœ¬
- å¥½å‹è¯·æ±‚ç³»ç»Ÿ
- å¥½å‹åˆ—è¡¨ GUI
- æ”¶è—åŠŸèƒ½
- ä¸Šä¸‹çº¿é€šçŸ¥

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ”— ç›¸å…³é“¾æ¥

- [UltiTools-API æ–‡æ¡£](https://docs.ultikits.com)
- [GitHub ä»“åº“](https://github.com/UltiKits/UltiTools-Reborn)
- [é—®é¢˜åé¦ˆ](https://github.com/UltiKits/UltiTools-Reborn/issues)
